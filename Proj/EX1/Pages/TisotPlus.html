<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/tisotPluscss.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <script src="js/JavaScriptTisotPlus.js"></script>
    <link href="css/tisotPluscss.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="assets/css/styles.css">
    <link rel="stylesheet" type="text/css" href="assets/css/demo.css">

    <!-- Title Page-->
    <title>Tisot Plus</title>
    <link rel="shortcut icon" type="image/x-icon" href="images/iconsbeach.png" />

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"></script>

    <!--***************************************datatables*********************************************-->
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap.min.css">

    <!--***************************************ajaxCalls*********************************************-->
    <script src="../Scripts/ajaxCalls.js"></script>


    <!--***************************************stylesheet*********************************************-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700">  <!-- Google web font "Open Sans" -->
    <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">                <!-- Font Awesome -->
    <link rel="stylesheet" href="css/bootstrap.min.css">                                      <!-- Bootstrap style -->
    <link rel="stylesheet" type="text/css" href="slick/slick.css" />
    <link rel="stylesheet" type="text/css" href="slick/slick-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/datepicker.css" />
    <link rel="stylesheet" href="css/tooplate-style.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css">



    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>


    <!-- Font special for pages-->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i" rel="stylesheet">

    <!-- Vendor CSS-->
    <link href="vendor/select2/select2.min.css" rel="stylesheet" media="all">
    <link href="vendor/datepicker/daterangepicker.css" rel="stylesheet" media="all">

    <!-- Main CSS-->
    <link href="css/main.css" rel="stylesheet" media="all">

    <title></title>
    <style>
        @font-face {
            font-family: 'IBMPlexSerif-Light';
            src: url('../fonts/IBMPlexSerif-Light.ttf') format('truetype');
        }

        @font-face {
            font-family: 'IBMPlexSerif-BoldItalic';
            src: url('../fonts/IBMPlexSerif-BoldItalic.ttf') format('truetype');
        }

        @font-face {
            font-family: 'IBMPlexSerif-ExtraLight';
            src: url('../fonts/IBMPlexSerif-ExtraLight.ttf') format('truetype');
        }

        @font-face {
            font-family: 'IBMPlexSerif-Bold';
            src: url('../fonts/IBMPlexSerif-Bold.ttf') format('truetype');
        }

        @font-face {
            font-family: 'IBMPlexSerif-Medium';
            src: url('../fonts/IBMPlexSerif-Medium.ttf') format('truetype');
        }

        @font-face {
            font-family: 'IBMPlexSerif-SemiBold';
            src: url('../fonts/IBMPlexSerif-SemiBold.ttf') format('truetype');
        }

        @font-face {
            font-family: 'IBMPlexSerif-Regular';
            src: url('../fonts/IBMPlexSerif-Regular.ttf') format('truetype');
        }

        * {
            font-family: 'IBMPlexSerif-Light';
        }
    </style>





</head>
<body>
    <!--<div id="scroll_top" class="active" href="#top"></div>-->

    <div class="tm-main-content" id="top">
        <div id="searchDiv">

            <div class="tm-top-bar-bg"></div>
            <div class="tm-top-bar" id="tm-top-bar">

                <!--***************************************Top Navbar*********************************************-->
                <div class="container">
                    <div class="row">

                        <nav class="navbar navbar-expand-lg narbar-light">
                            <a class="navbar-brand mr-auto" href="#">
                                <img src="images/tisotplus.png" alt="Site logo" style="width: 230px;">
                            </a>
                            <button type="button" id="nav-toggle" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#mainNav" aria-expanded="false" aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                            </button>

                            <div id="mainNav" class="collapse navbar-collapse tm-bg-white">
                                <ul class="navbar-nav ml-auto">
                                    <li class="nav-item">
                                        <a class="nav-link" href="#mainDiv">Home <span class="sr-only">(current)</span></a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#hotToursDiv">Hot Tours</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" onclick="tourCompany()">Tour Company</a>
                                    </li>

                                </ul>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>


        <!--***************************************Main Div*********************************************-->
        <div id="mainDiv" class="tm-section tm-bg-img">
            <div class="container" id="title">
                <p>Welcome To</p>
                <div id="cityName"> </div>
                <div id="summary"> </div>
            </div>
        </div>

        <div class="container-fluid" id="adtime">
            <div class="row">
                <div class="col" id="atime"> </div>
                <div class="col-1">
                    <img src="images/source.gif" style="width: 110px;">
                </div>
                <div class="col-3" id="stopTime"> </div>
                <div class="col-1">
                    <img src="images/source.gif" style="width: 110px;">
                </div>
                <div class="col" id="dtime"> </div>
            </div>

        </div>


        <!--***************************************Hot tours div*********************************************-->
        <div id="hotToursDiv">
            <div class="container-fluid">
                <div class="row" id="daytours">
                    <div class="fll spr3">
                        <h1 class="bebs cat sect_title">Day Tours</h1>
                        <div class="flc"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <table class="center" onclick="daytour(0)">
                            <tr class="tr0">
                                <td id="name0"></td>
                            </tr>
                            <tr class="tr1">
                                <td class="tdimg" id="img0"></td>
                            </tr>
                        </table>
                    </div>
                    <div class="col">
                        <table class="center" onclick="daytour(1)">
                            <tr class="tr0">
                                <td id="name1"></td>
                            </tr>
                            <tr class="tr1">
                                <td class="tdimg" id="img1"></td>
                            </tr>
                        </table>
                    </div>
                    <div class="col">
                        <table class="center" onclick="daytour(2)">
                            <tr class="tr0">
                                <td id="name2"></td>
                            </tr>
                            <tr class="tr1">
                                <td class="tdimg" id="img2"></td>
                            </tr>
                        </table>
                    </div>
                    <div class="col">
                        <table class="center" onclick="daytour(3)">
                            <tr class="tr0">
                                <td id="name3"></td>
                            </tr>
                            <tr class="tr1">
                                <td class="tdimg" id="img3"></td>
                            </tr>

                        </table>
                    </div>
                </div>



            </div>
            <!--***************************************City Walks div*********************************************-->
            <div class="container-fluid" id="guideTour">
                <div class="row">
                    <div class="fll spr3">
                        <h1 class="bebs cat sect_title">Guided Tours</h1>
                        <div class="flc"></div>
                    </div>
                </div>
                <div id="MainguideTourRow">

                </div>



            </div>
        </div>


        <!--***************************************Information Page*********************************************-->
        <div id="informationPage">
            <div class="container-fluid">
                <div class="row">
                    <div class="col" id="infoName"></div>

                </div>
                <hr style=" border: none; height: 5px; background: #fecc086e; width: 1100px; margin: auto; " />
                <div class="row infoclass">
                    <div class="col-6">
                        <img src="images/clock.png" style="padding-left: 56px; padding-bottom: 18px; "> <br>
                        <p id="infoDuration">Duration : 6 Hours</p>
                        <p id="infoStart">Start at : 10:30 am </p>
                        <hr style="border: none;height: 3px;background: silver;margin-top: 15px;">
                        <p style="font-weight: bold; color: black;padding: 20px 0px 15px 0px;">Description:</p>
                        <p id="infoIntro"></p>
                        <p style="font-weight: bold; color: black;padding: 20px 0px 15px 0px;">What's included?</p>
                        <p id="included">
                            Food & drinks <br />
                            National Park fees<br />
                            Bottled water<br />
                            Driver <br />
                            Live commentary on board<br />
                            Local guide<br />
                            Pickup and drop-off from Airport<br />
                            Transport by air-conditioned minivan
                        </p>
                    </div>
                    <div class="col-6">
                        <div style="border: 1px solid #b6b6b6;border-radius: 15px;">
                            <h2 class="title" style="padding: 10px; background-color: #e1e1e1eb;border-radius: 15px 15px 0px 0px; font-size: 1.1em; padding-left: 30px; border-bottom: 1px solid #b6b6b6; margin:0px;font-weight:bold;">
                                1. Participants
                            </h2>
                            <div style="padding: 0px 23px 78px 23px;">
                                <div id="a" class="col-12">
                                    <div id="adultPrice" class="col-6" style="float: left;padding-bottom: 20px;">
                                        Adult (16 +)
                                    </div>
                                    <div class="col-6" style="float: left;padding-left: 80px;padding-bottom: 20px;">
                                        <div style="float: left" ;>
                                            <img src="images/minus-6-32.png" onclick="plusminusAdult(-1)" />
                                        </div>
                                        <div id="adult" style="float: left;padding: 0px 20px 0px 20px">
                                            0
                                        </div>
                                        <div style="float: left" ;>
                                            <img src="images/plus-6-32.png" onclick="plusminusAdult(1)" />
                                        </div>
                                    </div>
                                </div>
                                <hr style="border: none;height: 1px;background: silver;margin-top: 57px;">
                                <div class="col-12">
                                    <div id="childPrice" class="col-6" style="float: left;padding-bottom: 25px;padding-top: 20px;">
                                        Child (0-16)
                                    </div>
                                    <div class="col-6" style="float: left;padding-left: 80px;padding-bottom: 18px;padding-top: 20px;">
                                        <div style="float: left" ;>
                                            <img src="images/minus-6-32.png" onclick="plusminusChild(-1)" />
                                        </div>
                                        <div id="child" style="float: left;padding: 0px 20px 0px 20px">
                                            0
                                        </div>
                                        <div style="float: left" ;>
                                            <img src="images/plus-6-32.png" onclick="plusminusChild(1)" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="border: 1px solid #b6b6b6;border-radius: 15px;margin-top: 15px;margin-bottom: 15px;">
                            <h2 class="title" style="padding: 10px; background-color: #e1e1e1eb;border-radius: 15px 15px 0px 0px; font-size: 1.1em; padding-left: 30px; border-bottom: 1px solid #b6b6b6; margin:0px;font-weight:bold;">
                                2. Price Summary
                            </h2>
                            <div id="totalPrice" class="col-6" style="padding: 10px 0px 10px 50px;">
                                <div id="totalTourPrice">Total Tour Price: 0</div>
                                <div id="flightPrice">Flight Price: 0</div>
                                <hr style="border: none;height: 1px;background: silver;margin-top: 6px;">
                                <div id="finalPrice" style="font-size: 20px; font-weight: bold; ">Final Price: 0</div>
                            </div>
                        </div>
                        <div>
                            <button id="btnCheckOut">Check Out</button>
                        </div>

                    </div>
                </div>
            </div>
        </div>

        <!--***************************************Book Page*********************************************-->
        <div id="bookDiv">
            <div class="container-fluid">
                <div class="creditCardForm ">
                    <div class="heading">
                        <h1>Order Summary</h1>
                    </div>
                    <div>
                        <p>Flight details:</p>
                        <div>Departure : <div id="departureBook"> </div></div><br />
                        <div>Arrival : <div id="arrivalBook"> </div></div><br />
                        <div>Total amount : <div id="priceBook"> </div></div>
                    </div>


                </div>
                <div class="creditCardForm ">
                    <div class="heading">
                        <h1>Confirm Purchase</h1>
                    </div>
                    <div class="payment">
                        <form id="creditForm">
                            <div class="form-group name">
                                <label for="a">Full name</label>
                                <input type="text" class="form-control" id="formName">
                            </div>
                            <div class="form-group email">
                                <label for="a" style="margin-left: 10px; ">Email</label>
                                <input type="text" class="form-control" id="formEmail" style="margin-left: 10px; ">
                            </div>
                            <div class="form-group owner">
                                <label for="owner">Owner</label>
                                <input type="text" class="form-control" id="owner">
                            </div>
                            <div class="form-group CVV">
                                <label for="cvv">CVV</label>
                                <input type="text" class="form-control" id="cvv">
                            </div>
                            <div class="form-group" id="card-number-field">
                                <label for="cardNumber">Card Number</label>
                                <input type="text" class="form-control" id="cardNumber">
                            </div>
                            <div class="form-group" id="expiration-date">
                                <label>Expiration Date</label>
                                <select id="month">
                                    <option value="01">January</option>
                                    <option value="02">February </option>
                                    <option value="03">March</option>
                                    <option value="04">April</option>
                                    <option value="05">May</option>
                                    <option value="06">June</option>
                                    <option value="07">July</option>
                                    <option value="08">August</option>
                                    <option value="09">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>
                                </select>
                                <select id="year">
                                    <option value="20"> 2020</option>
                                    <option value="21"> 2021</option>
                                    <option value="22"> 2022</option>
                                    <option value="23"> 2023</option>
                                    <option value="24"> 2024</option>
                                    <option value="25"> 2025</option>
                                </select>
                            </div>
                            <div class="form-group" id="credit_cards">
                                <img src="assets/images/visa.jpg" id="visa">
                                <img src="assets/images/mastercard.jpg" id="mastercard">
                                <img src="assets/images/amex.jpg" id="amex">
                            </div>
                            <div class="form-group" id="pay-now">
                                <button type="submit" class="btn btn-default" id="confirm-purchase">Confirm</button>
                            </div>
                        </form>
                    </div>
                </div>





            </div>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
            <script src="assets/js/jquery.payform.min.js" charset="utf-8"></script>
            <script src="assets/js/script.js"></script>

        </div>


        <!--***************************************Tour Company Page*********************************************-->
        <div id="tourCompanyPage" style="background-image: url('images/bywallpaper.jpg');background-repeat:no-repeat;padding: 80px 600px 80px 600px;">

            <div class="wrapper wrapper--w680">
                <div class="card card-1">
                    <div class="card-body">
                        <h2 class="title">Register your tour</h2>
                        <form id="tourCompanyForm">
                            <div class="input-group">
                                <input class="input--style-1" type="text" id="companyName" placeholder="Company Name" required>
                            </div>
                            <div class="input-group">
                                <input class="input--style-1" type="email" id="bookEmail" placeholder="Email" required>
                            </div>
                            <div class="input-group">
                                <input style="text-transform:capitalize" class="input--style-1" type="text" id="cityTour" placeholder="City" required>
                            </div>
                            <div class="input-group">
                                <input class="input--style-1" type="number" min="1" max="6" id="tourDuration" placeholder="Tour Duration (1-6 Hours)" required>
                            </div>
                            <div class="input-group">
                                <input class="input--style-1" type="number" min="1" max="100" id="tourPrice" placeholder="Price" required>
                            </div>

                            <textarea rows="4" cols="50" id="tourDescription" style="margin-top: 0px;margin-bottom: 0px;height: 71px;border: none;width: 500px;border-radius: 15px;">Description...</textarea>

                            <div style="padding-bottom: 30px;">
                                <input type="checkbox" id="food" style="width:3%" onclick="restaurantGetApi()">
                                Restaurant include?
                                <div id="restaurantList" style="padding-top: 15px; padding-bottom: 40px; "> </div>

                            </div>

                            <div>
                                <input type="checkbox" style="width:3%" required>
                                I agree to <a href="">terms and conditions</a> of TisotPlus

                            </div>
                            <div class="p-t-20">
                                <button class="btn btn--radius btn--green" type="reset" style="background-color:red">Clear</button>
                            </div>
                            <div class="p-t-20">
                                <button class="btn btn--radius btn--green" type="submit">Submit</button>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>











        <div>
            <footer class="tm-bg-dark-blue">
                <div class="container">
                    <div class="row">
                        <p class="col-sm-12 text-center tm-font-light tm-color-white p-4 tm-margin-b-0">
                            Copyright &copy; <span class="tm-current-year">2020</span> Tisot Asaf & Shachar
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <a href="TisotPlus.html">Home page</a>
                        </p>
                    </div>
                </div>
            </footer>
        </div>


        <!-- load JS files -->
        <!--<script src="js/jquery-1.11.3.min.js"></script>-->             <!-- jQuery (https://jquery.com/download/) -->
        <script src="js/popper.min.js"></script>                    <!-- https://popper.js.org/ -->
        <script src="js/bootstrap.min.js"></script>                 <!-- https://getbootstrap.com/ -->
        <script src="js/datepicker.min.js"></script>                <!-- https://github.com/qodesmith/datepicker -->
        <script src="js/jquery.singlePageNav.min.js"></script>      <!-- Single Page Nav (https://github.com/ChrisWojcik/single-page-nav) -->
        <script src="slick/slick.min.js"></script>                  <!-- http://kenwheeler.github.io/slick/ -->
        <script>

            function setCarousel() {

                if ($('.tm-article-carousel').hasClass('slick-initialized')) {
                    $('.tm-article-carousel').slick('destroy');
                }

                if ($(window).width() < 438) {
                    // Slick carousel
                    $('.tm-article-carousel').slick({
                        infinite: false,
                        dots: true,
                        slidesToShow: 1,
                        slidesToScroll: 1
                    });
                }
                else {
                    $('.tm-article-carousel').slick({
                        infinite: false,
                        dots: true,
                        slidesToShow: 2,
                        slidesToScroll: 1
                    });
                }
            }

            function setPageNav() {
                if ($(window).width() > 991) {
                    $('#tm-top-bar').singlePageNav({
                        currentClass: 'active',
                        offset: 79
                    });
                }
                else {
                    $('#tm-top-bar').singlePageNav({
                        currentClass: 'active',
                        offset: 65
                    });
                }
            }



            $(document).ready(function () {

                $(window).on("scroll", function () {
                    if ($(window).scrollTop() > 100) {
                        $(".tm-top-bar").addClass("active");
                    } else {
                        //remove the background property so it comes transparent again (defined in your css)
                        $(".tm-top-bar").removeClass("active");
                    }
                });


                // Slick carousel
                setCarousel();
                setPageNav();

                $(window).resize(function () {
                    setCarousel();
                    setPageNav();
                });

                // Close navbar after clicked
                $('.nav-link').click(function () {
                    $('#mainNav').removeClass('show');
                });



                // Update the current year in copyright
                $('.tm-current-year').text(new Date().getFullYear());
            });

        </script>
    </div>

    <script>
        
            var triposoData, triposoData1, triposoData2, triposoData3
            var longestStopArr = JSON.parse(localStorage.getItem("stop"));//no brackets
            var photoString;
            var nameString = longestStopArr[0];
            var summary;
            var arrivalTime = convertToHumanTime(longestStopArr[2]);
            var departureTime = convertToHumanTime(longestStopArr[3]);
            var stopTime = longestStopArr[1];
            var flightPrice = Number(longestStopArr[4]);
            var flightId = longestStopArr[5];
            var flightAirportOut = longestStopArr[6];
            var flightAirportIn = longestStopArr[7];
            var flightTimeOut = longestStopArr[8];
            var flightTimeIn = longestStopArr[9];



            $(document).ready(function () {
                var triposoQueryURL = 'https://www.triposo.com/api/20200803/location.json?id=' + longestStopArr[0] + '&account=K3HJT7V8&token=oue4mqfb5mdusczwssltluebxrp8853a';
                $.get(triposoQueryURL).done((data) => {
                    triposoData = data;
                    photoString = data.results[0].images[0].source_url;
                    document.getElementById("mainDiv").style.backgroundImage = 'url(' + photoString + ')';
                    document.getElementById("cityName").innerHTML = nameString;


                    for (var i = 0; i < 4; i++) {
                        img = triposoData.results[0].images[i + 1].source_url;
                        document.getElementById("img" + i).style.backgroundImage = 'url(' + img + ')';
                    }

                });
                $.get(triposoQueryURL).fail((err) => {
                    console.log(err);
                });

                var triposoQueryURL2 = 'https://www.triposo.com/api/20200803/location.json?tag_labels=city&annotate=trigram:' + longestStopArr[0] + '&trigram=>=0.3&count=10&fields=id,name,score,country_id,parent_id,snippet&order_by=-trigram&account=K3HJT7V8&token=oue4mqfb5mdusczwssltluebxrp8853a';
                $.get(triposoQueryURL2).done((data) => {
                    triposoData2 = data;
                    summary = triposoData2.results[0].snippet;
                    document.getElementById("summary").innerHTML = summary;

                });
                $.get(triposoQueryURL2).fail((err) => {
                    console.log(err);
                });

                var triposoQueryURL3 = 'https://www.triposo.com/api/20200803/tour.json?location_ids=' + longestStopArr[0] + '&count=4&fields=id,name,score,price,price_is_per_person,vendor,intro,tag_labels&order_by=-score&account=K3HJT7V8&token=oue4mqfb5mdusczwssltluebxrp8853a';
                $.get(triposoQueryURL3).done((data) => {
                    triposoData3 = data;

                    for (var i = 0; i < 4; i++) {
                        tripName = triposoData3.results[i].name;
                        tripIntro = triposoData3.results[i].intro;
                        tripAmount = triposoData3.results[i].amount + " " + triposoData3.results[i].currency;
                        document.getElementById("name" + i).innerHTML = tripName;
                    }

                });
                $.get(triposoQueryURL3).fail((err) => {
                    console.log(err);
                });


                var city = longestStopArr[0];
                var url = "../api/Tours?City=" + city;
                ajaxCall("GET", url, "", getSuccessBCB, getErrorCB);


                adtimefunc();
                $("#informationPage").hide();
                $("#bookDiv").hide();
                $("#tourCompanyPage").hide();
                $("#tourCompanyForm").submit(confirmTour);




            });
            var guidedTour;
            var guidedTourURL = new Array();

            function getSuccessBCB(data) {
                guidedTour = data;
                if (guidedTour.length > 0) {

                    for (var i = 0; i < guidedTour.length; i++) { /***************************************************************************/
                        str = "";
                        str = 'https://www.triposo.com/api/20200803/city_walk.json?location_id=' + longestStopArr[0] + '&total_time=' + guidedTour[i].Duration * 60 + '&account=K3HJT7V8&token=oue4mqfb5mdusczwssltluebxrp8853a';
                        funCallWait(str, i).then(response =>
                            console.log(response));

                    }
                }
                //else {

                //}

            }
            var imgCarousel = new Array();
            var strDiv;
            guidedArray = new Array();

            function BuildGuidedTour(num) {
                strPoi = "";
                for (var i = 0; i < guidedTourURL[num].way_points.length; i++) {
                    imgCarousel[i] = guidedTourURL[num].way_points[i].poi.images[0].source_url;
                    strPoi += '<p><img src="images/pointoi.png" style="width: 34px;"/> ' + guidedTourURL[num].way_points[i].poi.name + '</p>';

                }
                if (guidedTour[num].Restaurant != "") {
                    strRestaurant = '<p style="margin-top: 55px;" ><img src="images/restaurant-3-31.png" style="width: 25px;"/> ' + guidedTour[num].Restaurant + '</p>';
                }
                else {
                    strRestaurant = '<p style="margin-top: 55px;"><img src="images/restaurant-3-32.png" style="width: 25px;"/> Not Included </p>';
                }
                strPrice = guidedTour[num].Price;

                totalDuration = guidedTourURL[num].total_duration;
                walkDistance = guidedTourURL[num].walk_distance;
                guidedDescription = guidedTour[num].Description;

                guidedArray[num] = {
                    name: totalDuration + ' minutes Tour in ' + longestStopArr[0],
                    duration: totalDuration,
                    price: strPrice,
                    city: longestStopArr[0],
                    poi: strPoi,
                    distance: walkDistance,
                    description: guidedDescription,
                    restaurant: strRestaurant
                };



                strDiv = '<div class="row" id="guideTourRow">' +
                    '<div class="col-4 guideTourCol0"> <img src="' + imgCarousel[num] + '"></div>' +
                    '<div class="col-6 guideTourCol1" >' +
                    '<h2>' + totalDuration + ' minutes Tour in ' + longestStopArr[0] +
                    '</h2><img src="images/shoes.png"/>  Walking Distance: ' + walkDistance + ' Meters' +
                    '<div style="overflow: hidden;height: 200px;">' + strPoi + '</div></div>' +
                    '<div class="col-2 guideTourCol2">' + strRestaurant +
                    '<button id="btnCheckOutGuided" onclick="CheckOutGuided(' + num + ')" style="background-color: rgb(101, 204, 105);;margin-top: 120px;">Book For: ' + strPrice + ' Euro</button></div>' +
                    ' <hr style="border: none;height: 1px;background: #bababa6e;width: 1300px;margin: auto;left: 83px;margin-top: 35px;position: relative;" /></div>';

                document.getElementById("MainguideTourRow").innerHTML += strDiv;


            }

            var adultPriceGuided = 0;
            var childPriceGuided = 0;
            function CheckOutGuided(num) {

                $("#mainDiv").hide();
                $("#hotToursDiv").hide();
                $("#informationPage").show();
                adultPrice = guidedArray[num].price;
                childPrice = (guidedArray[num].price) / 2;
                document.getElementById("infoName").innerHTML = guidedArray[num].name;
                document.getElementById("infoDuration").innerHTML = "Duration : " + guidedArray[num].duration + " minutes"
                document.getElementById("infoStart").innerHTML = "Start at : " + (convertToHumanTimeH(longestStopArr[2]) + 1) + ":30";

                document.getElementById("infoIntro").innerHTML = guidedArray[num].description;
                document.getElementById("included").innerHTML = guidedArray[num].poi + '<p style="padding-top: 45px;"><img src="images/bus-32.png" style="width: 25px;"/> Airport Transportation </p>' + guidedArray[num].restaurant;
                document.getElementById("adultPrice").innerHTML = "Adult (16+): " + adultPrice + " Euro ";
                document.getElementById("childPrice").innerHTML = "Child (0-16): " + childPrice + " Euro";

            }

            function funCallWait(str, i) {
                // returns a promise that can be used later.
                return $.get(str).done((data1) => {
                    guidedTourURL[i] = data1.results[0];
                    BuildGuidedTour(i);
                });
                $.get(str).fail((err) => {
                    console.log(err);
                });
            }


            function getErrorCB(err) {
                alert("בעיה בשרת הSQL בקריאת הGuided Tours ");
            }




            function adtimefunc() {
                document.getElementById("atime").innerHTML = 'Arriving ' + arrivalTime;
                document.getElementById("stopTime").innerHTML = Math.floor(stopTime) + ' Hours Stop';
                document.getElementById("dtime").innerHTML = 'Departing ' + departureTime;
                //if (stopTime > 12) {

                //}
            }
            var childPrice;
            var adultPrice;
            var currency;
            var adultCount = 0;
            var childCount = 0;
            function daytour(num) {
                $("#mainDiv").hide();
                $("#hotToursDiv").hide();
                $("#informationPage").show();
                adultPrice = Number(triposoData3.results[num].price["amount"]);
                childPrice = Number(triposoData3.results[num].price["amount"] / 2);
                currency = triposoData3.results[num].price["currency"];
                document.getElementById("infoName").innerHTML = triposoData3.results[num].name;
                document.getElementById("infoIntro").innerHTML = triposoData3.results[num].intro;
                document.getElementById("adultPrice").innerHTML = "Adult (16+): " + adultPrice + " Euro";
                document.getElementById("childPrice").innerHTML = "Child (0-16): " + childPrice + " Euro";

                //document.getElementById("totalPrice").innerHTML = "<div>Total Tour Price: 0" + " " + currency + "</div> " +
                //    "<div>Flight Price: " + flightPrice + " " + currency + "</div>" + "<div>Final Price: " + flightPrice + " " + currency + "</div>";

            }

            function convertToHumanTime(unixTimeStamp) {
                // Months array
                var months_arr = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                // Convert timestamp to milliseconds
                var date = new Date(unixTimeStamp * 1000);
                // Year
                var year = date.getFullYear();
                // Month
                var month = months_arr[date.getMonth()];
                // Day
                var day = date.getDate();
                // Hours
                var hours = date.getHours();
                // Minutes
                var minutes = "0" + date.getMinutes();
                // Seconds
                var seconds = "0" + date.getSeconds();
                // Display date time in MM-dd-yyyy h:m:s format
                var convdataTime = month + '-' + day + '-' + year + ' ' + hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);

                return convdataTime;
            }

            function convertToHumanTimeH(unixTimeStamp) {
                var date = new Date(unixTimeStamp * 1000);
                var hours = date.getHours();

                return hours;
            }
            var number;
            var tourTotalPrice = 0;//adult+child
            var totalAdultPrice = 0;
            var totalChildPrice = 0;
            var finalPrice = 0;//flightPrice+ totalPrice
            var finalFlightPrice = 0;

            function plusminusAdult(num) {
                number = Number(document.getElementById("adult").textContent);
                number += num;
                totalAdultPrice += num * adultPrice;

                if (number < 0) {
                    document.getElementById("adult").innerHTML = 0;
                    totalAdultPrice = 0;
                    adultCount = 0;
                }
                else {
                    document.getElementById("adult").innerHTML = number;
                    finalFlightPrice += num * flightPrice;
                    adultCount += num;
                    document.getElementById("btnCheckOut").style.backgroundColor = '#65cc69';
                    document.getElementById('btnCheckOut').onclick = function () {
                        book();
                    }

                }
                if (finalFlightPrice <= 0) {
                    finalFlightPrice = 0;
                    document.getElementById("btnCheckOut").style.backgroundColor = '#b2b2b2';
                    document.getElementById('btnCheckOut').onclick = function () {

                    }

                }

                tourTotalPrice = totalAdultPrice + totalChildPrice;
                finalPrice = tourTotalPrice + finalFlightPrice;

                document.getElementById("totalTourPrice").innerHTML = " Adults: " + adultCount + " x " + adultPrice + " " + " Euro" + "<br>Childs: " + childCount + " x " + childPrice + " " + " Euro";
                document.getElementById("flightPrice").innerHTML = 'Flight Price: ' + finalFlightPrice + ' ' + " Euro";
                document.getElementById("finalPrice").innerHTML = 'Final Price: ' + finalPrice.toFixed(2) + ' ' + " Euro";

            }

            function plusminusChild(num) {
                number = Number(document.getElementById("child").textContent);
                number += num;
                totalChildPrice += num * childPrice;


                if (number < 0) {
                    document.getElementById("child").innerHTML = 0;
                    totalChildPrice = 0;
                    childCount = 0;
                }
                else {
                    document.getElementById("child").innerHTML = number;
                    finalFlightPrice += num * flightPrice;
                    childCount += num;
                    document.getElementById("btnCheckOut").style.backgroundColor = '#65cc69'; //green
                    document.getElementById('btnCheckOut').onclick = function () {
                        book();
                    }

                }
                if (finalFlightPrice <= 0) {
                    finalFlightPrice = 0;
                    document.getElementById("btnCheckOut").style.backgroundColor = '#b2b2b2';
                    document.getElementById('btnCheckOut').onclick = function () {

                    }

                }

                tourTotalPrice = totalAdultPrice + totalChildPrice;
                finalPrice = tourTotalPrice + finalFlightPrice;


                document.getElementById("totalTourPrice").innerHTML = " Adults: " + adultCount + " x " + adultPrice + " " + " Euro" + "<br>Childs: " + childCount + " x " + childPrice + " " + " Euro";
                document.getElementById("flightPrice").innerHTML = 'Flight Price: ' + finalFlightPrice + ' ' + " Euro";
                document.getElementById("finalPrice").innerHTML = 'Final Price: ' + finalPrice.toFixed(2) + ' ' + " Euro";
            }
            function book() {
                $("#informationPage").hide();
                $("#bookDiv").show();
                document.getElementById("departureBook").innerHTML = flightAirportOut + " " + flightTimeOut;
                document.getElementById("arrivalBook").innerHTML = flightAirportIn + " " + flightTimeIn;
                document.getElementById("priceBook").innerHTML = finalPrice;

            }

            function tourCompany() {

                $("#mainDiv").hide();
                $("#hotToursDiv").hide();
                $("#informationPage").hide();
                $("#bookDiv").hide();
                $("#adtime").hide();
                $("#tourCompanyPage").show();

            }

            var triposoData4
            function restaurantGetApi() {
                var checkBox = document.getElementById("food");
                var cityTour = document.getElementById("cityTour").value;
                cityTour = cityTour.charAt(0).toUpperCase() + cityTour.slice(1);

                if (checkBox.checked == true) {
                    var triposoQueryURL4 = 'https://www.triposo.com/api/20200803/poi.json?location_id=' + cityTour + '&tag_labels=eatingout&count=10&fields=name&account=K3HJT7V8&token=oue4mqfb5mdusczwssltluebxrp8853a';

                    $.get(triposoQueryURL4).done((data) => {
                        triposoData4 = data.results;
                        str = 'Our top 10 restaurants in ' + cityTour + ': <select id ="year" style="left: 83px;width: 200px;border-radius: 12px;position:relative;">';
                        if (triposoData4.length != 0) {
                            for (var i = 0; i < triposoData4.length; i++) {
                                str += ' <option value="' + triposoData4[i].name + '">' + triposoData4[i].name + '</option>';

                            }
                            str += ' </select>';
                            document.getElementById("restaurantList").innerHTML = str;

                        }
                        else {
                            swal("! בדוק את שם העיר", "נסה שנית", "error");
                            checkBox.checked = false;
                        }

                    });
                    $.get(triposoQueryURL4).fail((err) => {
                        swal("! בדוק את שם העיר", "נסה שנית", "error");
                    });

                }
                else {
                    document.getElementById("restaurantList").innerHTML = "";

                }

            }
            var saveTheTour = {};
            function confirmTour() {


                saveTheTour = {
                    CompanyName: $("#companyName").val(),
                    Email: $("#bookEmail").val(),
                    City: $("#cityTour").val(),
                    Duration: $("#tourDuration").val(),
                    Price: $("#tourPrice").val(),
                    Description: $("#tourDescription").val(),
                    Restaurant: $("#restaurantList :selected").text()
                }

                ajaxCall("POST", "../api/Tours", JSON.stringify(saveTheTour), tourSuccess, tourError);

                return false;

            }

            function tourSuccess() {
                swal({
                    title: "! הכנסת טיול בהצלחה",
                    text: "תוכל לראותו בטיולים הבאים",
                    icon: "success",

                })
                    .then((value) => {
                        window.open("TisotPlus.html");
                        window.close("TisotPlus.html");
                    });
            }


            function tourError() {
                swal("! משהו השתבש בדוק את פרטי הטיול", "נסה שנית", "error");
            }

       

    </script>

</body>


</html>